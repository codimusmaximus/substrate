<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 300">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#64748b"/>
    </marker>
    <marker id="arrow-purple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#8b5cf6"/>
    </marker>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>

  <rect width="800" height="300" fill="#0f172a"/>

  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" font-weight="700" fill="#f8fafc">How It Works</text>

  <!-- User -->
  <g filter="url(#shadow)">
    <circle cx="80" cy="150" r="35" fill="#1e293b" stroke="#64748b" stroke-width="2"/>
    <text x="80" y="145" text-anchor="middle" font-family="system-ui, sans-serif" font-size="20" fill="#f8fafc">ðŸ‘¤</text>
    <text x="80" y="165" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#94a3b8">You</text>
  </g>

  <!-- Arrow 1 -->
  <path d="M120 150 L170 150" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="145" y="140" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">ask</text>

  <!-- Claude -->
  <g filter="url(#shadow)">
    <rect x="180" y="115" width="110" height="70" rx="12" fill="#1e293b" stroke="#8b5cf6" stroke-width="2"/>
    <text x="235" y="145" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#c4b5fd">Claude</text>
    <text x="235" y="165" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Code</text>
  </g>

  <!-- Arrow 2 -->
  <path d="M295 150 L345 150" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrow-purple)"/>
  <text x="320" y="140" text-anchor="middle" font-family="monospace" font-size="8" fill="#8b5cf6">MCP call</text>

  <!-- MCP Server -->
  <g filter="url(#shadow)">
    <rect x="355" y="115" width="110" height="70" rx="12" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
    <text x="410" y="145" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#93c5fd">Substrate</text>
    <text x="410" y="165" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">MCP Server</text>
  </g>

  <!-- Arrow 3 -->
  <path d="M470 150 L520 150" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="495" y="140" text-anchor="middle" font-family="monospace" font-size="8" fill="#64748b">query</text>

  <!-- Database -->
  <g filter="url(#shadow)">
    <rect x="530" y="115" width="110" height="70" rx="12" fill="#1e293b" stroke="#f59e0b" stroke-width="2"/>
    <text x="585" y="145" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#fcd34d">PostgreSQL</text>
    <text x="585" y="165" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">Your data</text>
  </g>

  <!-- Arrow 4 (return) -->
  <path d="M530 175 L470 175" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Arrow 5 (return) -->
  <path d="M355 175 L295 175" stroke="#8b5cf6" stroke-width="2" marker-end="url(#arrow-purple)"/>

  <!-- Arrow 6 (return) -->
  <path d="M180 175 L120 175" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="145" y="190" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">answer</text>

  <!-- Background Worker (below) -->
  <g filter="url(#shadow)">
    <rect x="355" y="220" width="110" height="50" rx="8" fill="#14532d" stroke="#22c55e" stroke-width="1"/>
    <text x="410" y="245" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#86efac">Worker</text>
    <text x="410" y="260" text-anchor="middle" font-family="system-ui, sans-serif" font-size="9" fill="#64748b">Background tasks</text>
  </g>

  <!-- Connection to worker -->
  <path d="M410 190 L410 215" stroke="#22c55e" stroke-width="1" stroke-dasharray="4"/>

  <!-- External Systems -->
  <g filter="url(#shadow)">
    <rect x="650" y="100" width="120" height="100" rx="8" fill="#1e293b" stroke="#64748b" stroke-width="1"/>
    <text x="710" y="125" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#94a3b8">External</text>
    <text x="710" y="150" text-anchor="middle" font-family="monospace" font-size="10" fill="#64748b">Obsidian</text>
    <text x="710" y="167" text-anchor="middle" font-family="monospace" font-size="10" fill="#64748b">Resend</text>
    <text x="710" y="184" text-anchor="middle" font-family="monospace" font-size="10" fill="#64748b">Webhooks</text>
  </g>

  <!-- Connection to external -->
  <path d="M645 150 L650 150" stroke="#64748b" stroke-width="1" stroke-dasharray="4"/>

  <!-- Example query -->
  <rect x="130" y="60" width="220" height="30" rx="6" fill="#312e81"/>
  <text x="240" y="80" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#c4b5fd">"Create a task for John"</text>
  <path d="M240 92 L240 110" stroke="#8b5cf6" stroke-width="1" stroke-dasharray="3"/>
</svg>
